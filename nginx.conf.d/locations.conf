# Shared location configurations
location / {
    auth_basic off; # (for staging): disable basic auth so that API requests can pass without extra headers.
    default_type text/html;
    content_by_lua_block {
        require("lapis").serve("app")
    }
}

location /snap/ {
    sub_filter <head> '<head>\n\t<meta name="snap-cloud-domain" location="$scheme://$host:$server_port">';
    alias snap/;
}

location /site/ {
    sub_filter <head> '<head>\n\t<meta name="snap-cloud-domain" location="$scheme://$host:$server_port">';
    alias site/www/;
}

location /static/ {
    alias static/;
}
